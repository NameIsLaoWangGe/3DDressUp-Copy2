{
  "code": "import ADManager from \"../../TJ/Admanager\";\r\nimport { Admin, DataAdmin, DateAdmin, Dialogue, StorageAdmin } from \"./Lwg\";\r\nimport { _GameAni } from \"./_GameAni\";\r\nimport { _GameEvent } from \"./_GameEvent\";\r\nimport { _Guide } from \"./_Guide\";\r\nimport { _Res } from \"./_Res\";\r\nexport var _CheckIn;\r\n(function (_CheckIn) {\r\n    _CheckIn._checkInNum = {\r\n        get value() {\r\n            return StorageAdmin._num('_CheckIn/checkInNum').value;\r\n        },\r\n        set value(val) {\r\n            StorageAdmin._num('_CheckIn/checkInNum').value = val;\r\n        }\r\n    };\r\n    _CheckIn._lastCheckDate = {\r\n        get value() {\r\n            return StorageAdmin._num('_CheckIn/_lastCheckDate').value;\r\n        },\r\n        set value(val) {\r\n            StorageAdmin._num('_CheckIn/_lastCheckDate').value = val;\r\n        }\r\n    };\r\n    _CheckIn._todayCheckIn = {\r\n        get value() {\r\n            return _CheckIn._lastCheckDate.value == DateAdmin._date.date ? true : false;\r\n        },\r\n    };\r\n    class _Data extends DataAdmin._Table {\r\n        constructor() {\r\n            super(...arguments);\r\n            this._otherPro = {\r\n                checkAddition: 'checkAddition',\r\n                addRewardType: 'addRewardType',\r\n                addRewardNum: 'addRewardNum',\r\n                addCompelet: 'addCompelet',\r\n            };\r\n        }\r\n        static _ins() {\r\n            if (!this.ins) {\r\n                this.ins = new _Data('CheckIn', _Res._list.json.CheckIn.dataArr, true);\r\n            }\r\n            return this.ins;\r\n        }\r\n    }\r\n    _CheckIn._Data = _Data;\r\n    class _Item extends DataAdmin._Item {\r\n        $awake() { }\r\n        $button() {\r\n            this._btnUp(this._ImgChild('Reward'), () => {\r\n                if (!_CheckIn._todayCheckIn.value) {\r\n                    if (_CheckIn._checkInNum.value + 1 === this.$serial) {\r\n                        _CheckIn._lastCheckDate.value = DateAdmin._date.date;\r\n                        this.$compelet = true;\r\n                        const already = this._ImgChild('Reward').getChildAt(0);\r\n                        already.visible = true;\r\n                        _CheckIn._checkInNum.value++;\r\n                        if (_CheckIn._checkInNum.value === 4)\r\n                            _CheckIn._checkInNum.value = 0;\r\n                        if (!_Guide._complete.value) {\r\n                            _Guide.CheckInCloseBtn = true;\r\n                            const gP = this._SceneImg('Content').localToGlobal(new Laya.Point(this._SceneImg('BtnClose').x, this._SceneImg('BtnClose').y));\r\n                            this._evNotify(_GameEvent.Guide.CheckInCloseBtn, [gP.x, gP.y]);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    console.log('今天已经签到');\r\n                }\r\n            });\r\n        }\r\n        $render() {\r\n            if (this.$name === 'ads') {\r\n                this._LableChild('DayNum').text = this.$name;\r\n            }\r\n            else {\r\n                this._LableChild('DayNum').text = this.$name;\r\n            }\r\n        }\r\n    }\r\n    class CheckIn extends Admin._SceneBase {\r\n        lwgOnAwake() {\r\n            _Data._ins()._List = this._ListVar('List');\r\n            _Data._ins()._listRenderScript = _Item;\r\n        }\r\n        lwgOpenAni() {\r\n            return _GameAni._dialogOpenFadeOut(this._ImgVar('Content'), this._ImgVar('Background'), () => {\r\n                this._openScene('Guide', false, false, () => {\r\n                    this.BtnCloseClick();\r\n                    !_Guide._complete.value && this._evNotify(_GameEvent.Guide.CheckInGetReward, [this._ImgVar('Content').x - this._ImgVar('Content').width / 2 + 148, this._ImgVar('Content').y]);\r\n                });\r\n            });\r\n        }\r\n        BtnCloseClick() {\r\n            this._btnUp(this._ImgVar('BtnClose'), () => {\r\n                if (!_Guide._complete.value && _Guide.CheckInCloseBtn) {\r\n                    _Guide._complete.value = true;\r\n                    this._evNotify(_GameEvent.Guide.closeGuide);\r\n                    this._evNotify(_GameEvent.Guide.StartOtherBtnClick);\r\n                }\r\n                this._closeScene();\r\n            });\r\n        }\r\n        lwgButton() {\r\n            if (!_Guide._complete.value)\r\n                return;\r\n            this.BtnCloseClick();\r\n            this._btnUp(this._ImgVar('BtnImmediately'), () => {\r\n                if (this._storeNum('CheckIn/Immediately').value < 4) {\r\n                    ADManager.ShowReward(() => {\r\n                        this._storeNum('CheckIn/Immediately').value++;\r\n                        this._LabelVar('ImmediatelyNum').text = `${this._storeNum('CheckIn/Immediately').value / 4}  立即解锁`;\r\n                        if (this._storeNum('CheckIn/Immediately').value >= 4) {\r\n                            _Data._ins()._setAllProPerty(_Data._ins()._property.compelet, true);\r\n                            _Data._ins()._setAllProPerty(_Data._ins()._otherPro.addCompelet, true);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    Dialogue.createHint_Middle('奖励已经全部获得，无需在看广告o.o！');\r\n                }\r\n            });\r\n        }\r\n        lwgCloseAni() {\r\n            return _GameAni._dialogCloseFadeOut(this._ImgVar('Content'), this._ImgVar('Background'));\r\n        }\r\n    }\r\n    _CheckIn.CheckIn = CheckIn;\r\n})(_CheckIn || (_CheckIn = {}));\r\n",
  "references": [
    "D:/Game/project/3DDressUp/Copy/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/TJ/Admanager.ts",
    "D:/Game/project/3DDressUp/Copy/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/Lwg.ts",
    "D:/Game/project/3DDressUp/Copy/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/_GameAni.ts",
    "D:/Game/project/3DDressUp/Copy/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/_GameEvent.ts",
    "D:/Game/project/3DDressUp/Copy/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/_Guide.ts",
    "D:/Game/project/3DDressUp/Copy/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/_Res.ts"
  ]
}
