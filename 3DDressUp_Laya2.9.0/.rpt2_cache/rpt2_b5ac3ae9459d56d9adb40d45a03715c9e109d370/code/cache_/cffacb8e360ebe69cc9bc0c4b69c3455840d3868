{
  "code": "import { LwgTimer, LwgTools, LwgPreLoad } from \"../Lwg/Lwg\";\r\nimport { _3DDIYCloth, _3DScene } from \"./_3D\";\r\nimport { _AllClothes, _DIYClothes, _PreLoadCutIn } from \"./_GameData\";\r\nimport { _CutInRes } from \"./_Res\";\r\nimport { _SceneName } from \"./_SceneName\";\r\nexport default class PreLoadCutIn extends LwgPreLoad._PreLoadCutInScene {\r\n    lwgOpenAniAfter() {\r\n        let time = 0;\r\n        LwgTimer._frameNumLoop(1, 30, this, () => {\r\n            time++;\r\n            this._LabelVar('Schedule').text = `${time}%`;\r\n        }, () => {\r\n            let obj = _CutInRes[this.$openName];\r\n            obj = _CutInRes[this.$openName] ? obj : {};\r\n            this.lwgStartLoding(obj);\r\n        });\r\n    }\r\n    lwgAllComplete() {\r\n        console.log('加载完成！');\r\n        switch (this.$openName) {\r\n            case _SceneName.MakePattern:\r\n                _3DDIYCloth._ins().remake(_DIYClothes._ins()._pitchClassify, _DIYClothes._ins()._pitchName);\r\n                _3DScene._ins().intoMakePattern();\r\n                console.log(_DIYClothes._ins().getPitchTexBasicUrl());\r\n                this._ImgVar('Front').loadImage(_DIYClothes._ins().getPitchTexBasicUrl(), Laya.Handler.create(this, () => {\r\n                    var getTex = () => {\r\n                        let ImgF = this._ImgVar('Front');\r\n                        const tex = this._ImgVar('Front').drawToTexture(ImgF.width, ImgF.height, ImgF.x, ImgF.y + ImgF.height);\r\n                        return [\r\n                            tex,\r\n                            tex\r\n                        ];\r\n                    };\r\n                    _3DDIYCloth._ins().addTexture2D(getTex());\r\n                }));\r\n                break;\r\n            case _SceneName.MakeTailor:\r\n                _DIYClothes._ins().ClothesArr = null;\r\n                _3DScene._ins().intoMakeTailor();\r\n                _DIYClothes._ins().getClothesArr();\r\n                break;\r\n            case _SceneName.Start:\r\n                if (this.$closeName === _SceneName.MakePattern && !_PreLoadCutIn._fromBack) {\r\n                    this.iconPhoto();\r\n                }\r\n                else {\r\n                    _3DScene._ins().intoStart();\r\n                }\r\n                break;\r\n            case _SceneName.DressingRoom:\r\n                _3DScene._ins().intogeDressingRoom();\r\n            default:\r\n                break;\r\n        }\r\n        LwgTimer._frameOnce(30, this, () => {\r\n            this._LabelVar('Schedule').text = `100%`;\r\n        });\r\n        return 1000;\r\n    }\r\n    iconPhoto() {\r\n        if (TJ.API.AppInfo.Channel() == TJ.Define.Channel.AppRt.OPPO_AppRt) {\r\n            _3DScene._ins().intoStart();\r\n            _DIYClothes._ins()._setPitchProperty(_DIYClothes._ins()._otherPro.icon, 'have');\r\n            _AllClothes._ins().changeAfterMaking();\r\n        }\r\n        else {\r\n            _3DScene._ins().photoBg();\r\n            _3DDIYCloth._ins().hanger.active = false;\r\n            _3DDIYCloth._ins().Present.transform.localRotationEulerY = 180;\r\n            const sp = new Laya.Sprite;\r\n            this._Owner.addChild(sp)['size'](126, 146);\r\n            LwgTools._Draw.cameraToSprite(_3DScene._ins()._MainCamara, sp);\r\n            LwgTimer._frameOnce(5, this, () => {\r\n                const base64Icon = LwgTools._Draw.screenshot(sp, 0.5);\r\n                Laya.LocalStorage.setItem(`${_DIYClothes._ins()._pitchName}/icon`, base64Icon);\r\n                _DIYClothes._ins()._setPitchProperty(_DIYClothes._ins()._otherPro.icon, 'have');\r\n                _AllClothes._ins().changeAfterMaking();\r\n                _3DScene._ins().intoStart();\r\n            });\r\n        }\r\n    }\r\n    lwgOnDisable() {\r\n        _PreLoadCutIn._fromBack = false;\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Lwg/Lwg.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Game/_3D.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Game/_GameAni.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Game/_GameData.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Game/_Res.ts"
  ]
}
