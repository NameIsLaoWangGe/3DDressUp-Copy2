{
  "code": "import ADManager, { TaT } from \"../../TJ/Admanager\";\r\nimport { Animation2D, AudioAdmin, Color, Effects2D, TimerAdmin, Tools, _LwgPreLoad } from \"./Lwg\";\r\nimport { _3D } from \"./_3D\";\r\nimport { _DressingRoom } from \"./_DressingRoom\";\r\nimport { _Res } from \"./_Res\";\r\nexport var _PreLoad;\r\n(function (_PreLoad) {\r\n    class PreLoad extends _LwgPreLoad._PreLoadScene {\r\n        constructor() {\r\n            super(...arguments);\r\n            this.count = 0;\r\n        }\r\n        lwgOnAwake() {\r\n            ADManager.TAPoint(TaT.PageShow, 'loadpage');\r\n        }\r\n        lwgOnStart() {\r\n            const scale = 1.2;\r\n            const time = 100;\r\n            const delay = 100;\r\n            this._ImgVar('LoGo').scale(0, 0);\r\n            this._ImgVar('Progress').scale(0, 0);\r\n            this._ImgVar('Anti').alpha = 0;\r\n            this._LabelVar('TextTip1').alpha = 0;\r\n            const startCoefficient = 6;\r\n            TimerAdmin._once(delay * startCoefficient, this, () => {\r\n                this.effect();\r\n            });\r\n            TimerAdmin._once(delay * startCoefficient, this, () => {\r\n                Color._changeOnce(this._ImgVar('BG'), [100, 50, 0, 1], time / 3);\r\n            });\r\n            TimerAdmin._frameLoop(time / 2 * 2, this, () => {\r\n                TimerAdmin._once(delay * 6, this, () => {\r\n                    Color._changeOnce(this._ImgVar('LoGo'), [5, 40, 10, 1], time / 2);\r\n                });\r\n            });\r\n            Animation2D.bombs_Appear(this._ImgVar('LoGo'), 0, 1, scale, 0, time * 5, () => {\r\n                TimerAdmin._frameRandomLoop(30, 50, this, () => {\r\n                    Effects2D._Glitter._blinkStar(this._Owner, new Laya.Point(this._ImgVar('LoGo').x - 350, this._ImgVar('LoGo').y), [150, 100], [Effects2D._SkinUrl.星星1], null, [80, 80]);\r\n                }, true);\r\n                TimerAdmin._frameRandomLoop(30, 50, this, () => {\r\n                    Effects2D._Glitter._blinkStar(this._Owner, new Laya.Point(this._ImgVar('LoGo').x + 350, this._ImgVar('LoGo').y), [150, 100], [Effects2D._SkinUrl.星星1], null, [80, 80]);\r\n                }, true);\r\n                Animation2D.bombs_Appear(this._ImgVar('Progress'), 0, 1, scale, 0, time * 1.5, () => {\r\n                    TimerAdmin._frameNumLoop(2, 30, this, () => {\r\n                        this.count++;\r\n                        this.progressDisplay();\r\n                    }, () => {\r\n                        Animation2D.fadeOut(this._LabelVar('TextTip1'), 0, 1, time * 2, 0, () => {\r\n                            TimerAdmin._frameLoop(100, this, () => {\r\n                                this._LabelVar('TextTip2').text = '';\r\n                                TimerAdmin._frameNumLoop(10, 6, this, () => {\r\n                                    this._LabelVar('TextTip2').text += '.';\r\n                                });\r\n                            }, true);\r\n                        });\r\n                        this._evNotify(_LwgPreLoad._Event.importList, [_Res._list]);\r\n                    }, true);\r\n                    Animation2D.fadeOut(this._ImgVar('Anti'), 0, 1, time * 4, 200);\r\n                }, delay * 4);\r\n                TimerAdmin._once(delay * 4, this, () => {\r\n                    AudioAdmin._playSound(AudioAdmin._voiceUrl.btn);\r\n                });\r\n            }, delay * startCoefficient);\r\n        }\r\n        effect() {\r\n            const count = 90;\r\n            const time = 35;\r\n            const dis = Tools._Number.randomOneInt(500, 500);\r\n            const p = new Laya.Point(Laya.stage.width / 2, Laya.stage.height / 2);\r\n            for (let index = 0; index < count; index++) {\r\n                Effects2D._Particle._sprayRound(this._Owner, p, null, [20, 40], null, [Effects2D._SkinUrl.花4], null, [dis, dis], [time, time], null, null, 5);\r\n            }\r\n            for (let index = 0; index < count * 2; index++) {\r\n                Effects2D._Particle._sprayRound(this._Owner, p, null, [20, 40], null, [Effects2D._SkinUrl.花4], null, [100, dis - 20], [time, time], null, null, 5);\r\n            }\r\n        }\r\n        progressDisplay() {\r\n            this._ImgVar('ProgressBar').mask.x = -this._ImgVar('ProgressBar').width + this._ImgVar('ProgressBar').width / 100 * this.count;\r\n        }\r\n        lwgOpenAni() { return 10; }\r\n        lwgStepComplete() {\r\n            this._ImgVar('ProgressBar').mask.x += 5;\r\n        }\r\n        lwgAllComplete() {\r\n            TimerAdmin._frameLoop(5, this, () => {\r\n                if (this._ImgVar('ProgressBar').mask.x < 0) {\r\n                    this._ImgVar('ProgressBar').mask.x += 40;\r\n                    if (this._ImgVar('ProgressBar').mask.x > 0) {\r\n                        this._ImgVar('ProgressBar').mask.x = 0;\r\n                    }\r\n                }\r\n            });\r\n            _DressingRoom._Clothes._ins().changeClothStart();\r\n            _3D._Scene._ins().intoStart('preload');\r\n            return 2000;\r\n        }\r\n        lwgCloseAni() {\r\n            const num = 10;\r\n            const time = 1000;\r\n            const ran = Tools._Array.randomGetOne([1, 2]);\r\n            console.log(ran);\r\n            for (let index = 0; index < num; index++) {\r\n                let sp = new Laya.Sprite;\r\n                Laya.stage.addChild(sp);\r\n                sp.name = 'shutters';\r\n                sp.zOrder = 100;\r\n                var func1 = () => {\r\n                    sp.pos(this._Owner.width / num * index, 0);\r\n                    sp.size(this._Owner.width / num, Laya.stage.height);\r\n                    const tex = this._Owner.drawToTexture(this._Owner.width / num, this._Owner.height, -this._Owner.width / num * index, 0);\r\n                    sp.graphics.drawTexture(tex);\r\n                    Tools._Node.changePivot(sp, this._Owner.width / num / 2, sp.height / 2);\r\n                    Animation2D.scale(sp, 1, 1, 0, 1, time, 0, () => {\r\n                        tex.destroy();\r\n                        sp.destroy();\r\n                    });\r\n                };\r\n                var func2 = () => {\r\n                    const _height = Laya.stage.height / num;\r\n                    const _width = this._Owner.width;\r\n                    sp.pos(0, _height * index);\r\n                    sp.size(_width, _height * index);\r\n                    const tex = this._Owner.drawToTexture(_width, this._Owner.height / num, 0, -_height * index);\r\n                    sp.graphics.drawTexture(tex);\r\n                    Tools._Node.changePivot(sp, _width / 2, _height / 2);\r\n                    Animation2D.scale(sp, 1, 1, 1, 0, time, 0, () => {\r\n                        tex.destroy();\r\n                        sp.destroy();\r\n                    });\r\n                };\r\n                const arr = [func1, func2];\r\n                arr[ran - 1]();\r\n            }\r\n            this._Owner.visible = false;\r\n            return 1500;\r\n        }\r\n        lwgOnDisable() {\r\n            ADManager.TAPoint(TaT.PageLeave, 'loadpage');\r\n        }\r\n    }\r\n    _PreLoad.PreLoad = PreLoad;\r\n})(_PreLoad || (_PreLoad = {}));\r\nexport default _PreLoad.PreLoad;\r\n",
  "references": [
    "D:/Game/project/3DDressUp/Copy/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/TJ/Admanager.ts",
    "D:/Game/project/3DDressUp/Copy/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/Lwg.ts",
    "D:/Game/project/3DDressUp/Copy/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/_3D.ts",
    "D:/Game/project/3DDressUp/Copy/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/_DressingRoom.ts",
    "D:/Game/project/3DDressUp/Copy/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/_Res.ts"
  ]
}
