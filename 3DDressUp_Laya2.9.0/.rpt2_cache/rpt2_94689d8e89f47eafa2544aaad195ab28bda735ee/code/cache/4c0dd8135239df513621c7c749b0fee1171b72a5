{
  "code": "import ADManager from \"../../TJ/Admanager\";\r\nimport { LwgScene, LwgData, LwgDate, LwgDialogue } from \"../Lwg/Lwg\";\r\nimport { _GameAni } from \"./_GameAni\";\r\nimport { _CheckIn, _DIYClothes, _Guide, _MakePattern } from \"./_GameData\";\r\nimport { _GameEffects2D } from \"./_GameEffects2D\";\r\nimport { _SceneName } from \"./_SceneName\";\r\nclass _Item extends LwgData._Item {\r\n    $button() {\r\n        this._btnUp(this._ImgChild('Reward'), (e) => {\r\n            if (!_CheckIn._todayCheckIn.value) {\r\n                if (_CheckIn._checkInNum.value + 1 === this.$data.serial) {\r\n                    _CheckIn._lastCheckDate.value = LwgDate._date.date;\r\n                    console.log(_CheckIn._lastCheckDate.value, _CheckIn._todayCheckIn.value);\r\n                    _CheckIn._Data._ins()._setCompleteName(this.$data.name);\r\n                    _CheckIn._checkInNum.value++;\r\n                    if (this.$data.rewardType.substr(0, 3) === 'diy') {\r\n                        _DIYClothes._ins()._setCompleteByName(this.$data.rewardType);\r\n                        LwgDialogue.createHint_Middle('恭喜获得新的裁剪服装');\r\n                        _GameEffects2D._oneFireworks(new Laya.Point(e.stageX, e.stageY));\r\n                    }\r\n                    else if (this.$data.rewardType === 'cat') {\r\n                        _MakePattern._Pattern._ins()._setCompleteByClassify(this.$data.rewardType);\r\n                        LwgDialogue.createHint_Middle('恭喜获得猫咪贴图一套');\r\n                        _GameEffects2D._oneFireworks(new Laya.Point(e.stageX, e.stageY));\r\n                    }\r\n                    if (!_Guide._complete.value) {\r\n                        _Guide.CheckInCloseBtn = true;\r\n                        this._evNotify(_Guide.Event.CheckInCloseBtn, [this._SceneImg('BtnClose')._lwg.gPoint.x, this._SceneImg('BtnClose')._lwg.gPoint.y]);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                LwgDialogue.createHint_Middle('日期不对哦！');\r\n            }\r\n        });\r\n        var func = (e) => {\r\n            ADManager.ShowReward(() => {\r\n                _CheckIn._Data._ins()._setOtherCompleteName(this.$data.name);\r\n                if (this.$data.otherRewardType.substr(0, 3) === 'diy') {\r\n                    _DIYClothes._ins()._setCompleteByName(this.$data.otherRewardType);\r\n                    LwgDialogue.createHint_Middle('恭喜获得新的裁剪服装');\r\n                }\r\n                else if (this.$data.otherRewardType === 'newYear') {\r\n                    _MakePattern._Pattern._ins()._setCompleteByClassify(this.$data.otherRewardType);\r\n                    LwgDialogue.createHint_Middle('恭喜获得新年贴图一套');\r\n                }\r\n                _GameEffects2D._oneFireworks(new Laya.Point(e.stageX, e.stageY));\r\n            });\r\n        };\r\n        var adsClick = (e) => {\r\n            if (!this.$data.otherComplete) {\r\n                if (!_CheckIn._todayCheckIn.value) {\r\n                    if (_CheckIn._checkInNum.value + 1 >= this.$data.serial) {\r\n                        func(e);\r\n                    }\r\n                }\r\n                else {\r\n                    if (_CheckIn._checkInNum.value >= this.$data.serial) {\r\n                        func(e);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                LwgDialogue.createHint_Middle('日期不对哦！');\r\n            }\r\n        };\r\n        this._btnUp(this._ImgChild('AdsReward'), adsClick);\r\n        this._btnUp(this._ImgChild('BtnAdsReward'), adsClick);\r\n    }\r\n    $render() {\r\n        this._LableChild('DayNum').text = this.$data.name;\r\n        const Already = this._ImgChild('Reward').getChildByName('Already');\r\n        const Icon = this._ImgChild('Reward').getChildByName('Icon');\r\n        if (this.$data.rewardType.substr(0, 3) === 'diy') {\r\n            Icon.skin = _DIYClothes._ins().getDIYCutIcon(this.$data.rewardType);\r\n            Icon.scale(0.55, 0.55);\r\n        }\r\n        else if (this.$data.rewardType === 'cat') {\r\n            Icon.skin = `Pattern/${this.$data.rewardType}1.png`;\r\n            Icon.scale(0.18, 0.18);\r\n        }\r\n        Already.visible = this.$data.complete;\r\n        if (!this.$data.complete) {\r\n            if (_CheckIn._checkInNum.value + 1 === this.$data.serial) {\r\n                if (_CheckIn._todayCheckIn.value) {\r\n                    this._ImgChild('Reward').skin = 'Game/UI/ChekIn/k_nei.png';\r\n                }\r\n                else {\r\n                    this._ImgChild('Reward').skin = 'Game/UI/ChekIn/k_nei1.png';\r\n                }\r\n            }\r\n            else {\r\n                this._ImgChild('Reward').skin = 'Game/UI/ChekIn/k_nei.png';\r\n            }\r\n        }\r\n        else {\r\n            this._ImgChild('Reward').skin = 'Game/UI/ChekIn/k_nei.png';\r\n        }\r\n        const AdsAlready = this._ImgChild('AdsReward').getChildByName('Already');\r\n        const AdsIcon = this._ImgChild('AdsReward').getChildByName('Icon');\r\n        if (this.$data.otherRewardType.substr(0, 3) === 'diy') {\r\n            AdsIcon.skin = _DIYClothes._ins().getDIYCutIcon(this.$data.otherRewardType);\r\n            AdsIcon.scale(0.55, 0.55);\r\n        }\r\n        else if (this.$data.otherRewardType === 'newYear') {\r\n            AdsIcon.skin = `Pattern/${this.$data.otherRewardType}1.png`;\r\n            AdsIcon.scale(0.16, 0.16);\r\n        }\r\n        AdsAlready.visible = this.$data.otherComplete;\r\n        if (!this.$data.otherComplete) {\r\n            if (!_CheckIn._todayCheckIn.value) {\r\n                if (_CheckIn._checkInNum.value + 1 >= this.$data.serial) {\r\n                    this._ImgChild('AdsReward').skin = 'Game/UI/ChekIn/k_nei1.png';\r\n                    this._ImgChild('BtnAdsReward').gray = false;\r\n                }\r\n                else {\r\n                    this._ImgChild('AdsReward').skin = 'Game/UI/ChekIn/k_nei.png';\r\n                    this._ImgChild('BtnAdsReward').gray = true;\r\n                }\r\n            }\r\n            else {\r\n                if (_CheckIn._checkInNum.value >= this.$data.serial) {\r\n                    this._ImgChild('AdsReward').skin = 'Game/UI/ChekIn/k_nei1.png';\r\n                    this._ImgChild('BtnAdsReward').gray = false;\r\n                }\r\n                else {\r\n                    this._ImgChild('AdsReward').skin = 'Game/UI/ChekIn/k_nei.png';\r\n                    this._ImgChild('BtnAdsReward').gray = true;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this._ImgChild('AdsReward').skin = 'Game/UI/ChekIn/k_nei.png';\r\n            this._ImgChild('BtnAdsReward').visible = false;\r\n        }\r\n    }\r\n}\r\nexport default class CheckIn extends LwgScene._SceneBase {\r\n    lwgOnAwake() {\r\n        _CheckIn._Data._ins()._List = this._ListVar('List');\r\n        _CheckIn._Data._ins()._listRenderScript = _Item;\r\n        _CheckIn._Data._ins()._List.scrollBar.touchScrollEnable = false;\r\n        this._LabelVar('ImmediatelyNum').text = `${_CheckIn._immediately.value} / 4`;\r\n        if (_CheckIn._immediately.value >= 4 || _CheckIn._checkInNum.value >= 4) {\r\n            this._ImgVar('BtnImmediately').visible = false;\r\n            this._LabelVar('Tip').text = `奖励已经全部领取！`;\r\n        }\r\n    }\r\n    lwgOpenAni() {\r\n        return _GameAni._dialogOpenFadeOut(this._ImgVar('Content'), this._ImgVar('Background'), () => {\r\n            this._openScene(_SceneName.Guide, false, false, () => {\r\n                this.BtnCloseClick();\r\n                !_Guide._complete.value && this._evNotify(_Guide.Event.CheckInGetReward, [this._ImgVar('GuideTab1')._lwg.gPoint.x, this._ImgVar('GuideTab1')._lwg.gPoint.y]);\r\n            });\r\n        });\r\n    }\r\n    BtnCloseClick() {\r\n        this._btnUp(this._ImgVar('BtnClose'), () => {\r\n            if (!_Guide._complete.value && _Guide.CheckInCloseBtn) {\r\n                _Guide._complete.value = true;\r\n                LwgDialogue.createHint_Middle('开启你的女神之路吧!');\r\n                this._evNotify(_Guide.Event.closeGuide);\r\n                this._evNotify(_Guide.Event.StartOtherBtnClick);\r\n            }\r\n            this._closeScene();\r\n        });\r\n    }\r\n    lwgButton() {\r\n        if (!_Guide._complete.value)\r\n            return;\r\n        this.BtnCloseClick();\r\n        this._btnUp(this._ImgVar('BtnImmediately'), () => {\r\n            if (_CheckIn._immediately.value < 4) {\r\n                ADManager.ShowReward(() => {\r\n                    _CheckIn._immediately.value++;\r\n                    this._LabelVar('ImmediatelyNum').text = `${_CheckIn._immediately.value} / 4 `;\r\n                    if (_CheckIn._immediately.value >= 4) {\r\n                        this._ImgVar('BtnImmediately').visible = false;\r\n                        const gP1 = this._ImgVar('GuideTab1')._lwg.gPoint;\r\n                        _CheckIn._Data._ins()._setAllCompleteDelay(300, (com) => {\r\n                            const copyP1 = new Laya.Point(gP1.x, gP1.y);\r\n                            if (!com) {\r\n                                _GameEffects2D._oneFireworks(copyP1);\r\n                            }\r\n                            gP1.x += 165;\r\n                        }, null, null);\r\n                        const gP2 = this._ImgVar('GuideTab2')._lwg.gPoint;\r\n                        _CheckIn._Data._ins()._setAllOtherCompleteDelay(300, (com) => {\r\n                            const copyP2 = new Laya.Point(gP2.x, gP2.y);\r\n                            if (!com) {\r\n                                _GameEffects2D._oneFireworks(copyP2);\r\n                            }\r\n                            gP2.x += 165;\r\n                        }, null, () => {\r\n                            LwgDialogue.createHint_Middle('奖励已经全部获得，快去制作服装吧！');\r\n                        });\r\n                        _DIYClothes._ins()._setCompleteByNameArr(['diy_dress_003_final', 'diy_dress_007_final', 'diy_top_004_final', 'diy_bottom_005_final', 'diy_dress_006_final', 'diy_bottom_006_final']);\r\n                        _MakePattern._Pattern._ins()._setCompleteByClassify('cat');\r\n                        _MakePattern._Pattern._ins()._setCompleteByClassify('newYear');\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                LwgDialogue.createHint_Middle('奖励已经全部获得，无需在看广告o.o！');\r\n            }\r\n        });\r\n    }\r\n    lwgCloseAni() {\r\n        return _GameAni._dialogCloseFadeOut(this._ImgVar('Content'), this._ImgVar('Background'));\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/TJ/Admanager.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Lwg/Lwg.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Game/_GameAni.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Game/_GameData.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Game/_GameEffects2D.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Game/_Res.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Game/_SceneName.ts"
  ]
}
