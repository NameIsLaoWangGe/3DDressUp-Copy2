{
  "code": "import { StorageAdmin } from \"./Lwg\";\r\nexport var LwgOPPO;\r\n(function (LwgOPPO) {\r\n    function _screenShootByRatio(func, startXRatio, startYRatio, endXRatio, endYRatio, fileType, quality) {\r\n        if (TJ.API.AppInfo.Channel() == TJ.Define.Channel.AppRt.OPPO_AppRt) {\r\n            const _startXRatio = startXRatio ? startXRatio * window['__canvas'].width : 0;\r\n            const _startYRatio = startYRatio ? startYRatio * window['__canvas'].height : 0;\r\n            window['__canvas'].toTempFilePath({\r\n                x: _startXRatio,\r\n                y: _startYRatio,\r\n                width: endXRatio ? endXRatio * window['__canvas'].width - _startXRatio : window['__canvas'].width,\r\n                height: endYRatio ? endYRatio * window['__canvas'].height - _startYRatio : window['__canvas'].height,\r\n                fileType: fileType ? fileType : 'png',\r\n                quality: quality ? quality : 1,\r\n                success: (data) => {\r\n                    func && func(data);\r\n                    console.log('.............................截图成功', data['tempFilePath']);\r\n                },\r\n                fail: (data) => {\r\n                    console.log('？？？？？？？？？？？？？？？？', data['number']);\r\n                    console.log('xxxxxxxxxxxxxxxxxxxxxxxxxxxxx', data['errMsg']);\r\n                },\r\n                complete: () => { },\r\n            });\r\n        }\r\n    }\r\n    LwgOPPO._screenShootByRatio = _screenShootByRatio;\r\n    function _screenShoot(func, x, y, width, height, fileType, quality) {\r\n        if (TJ.API.AppInfo.Channel() == TJ.Define.Channel.AppRt.OPPO_AppRt) {\r\n            const _x = x * Laya.stage.clientScaleX;\r\n            const _y = y * Laya.stage.clientScaleY;\r\n            const _width = width * Laya.stage.clientScaleX;\r\n            const _height = height * Laya.stage.clientScaleY;\r\n            window['__canvas'].toTempFilePath({\r\n                x: _x,\r\n                y: _y,\r\n                width: _width,\r\n                height: _height,\r\n                fileType: fileType ? fileType : 'png',\r\n                quality: quality ? quality : 1,\r\n                success: (data) => {\r\n                    func && func(data);\r\n                    console.log('.............................截图成功', data['tempFilePath']);\r\n                },\r\n                fail: (data) => {\r\n                    console.log('？？？？？？？？？？？？？？？？', data['number']);\r\n                    console.log('xxxxxxxxxxxxxxxxxxxxxxxxxxxxx', data['errMsg']);\r\n                },\r\n                complete: () => { },\r\n            });\r\n        }\r\n    }\r\n    LwgOPPO._screenShoot = _screenShoot;\r\n    function _picSave(tempFilePath, name, func) {\r\n        if (TJ.API.AppInfo.Channel() == TJ.Define.Channel.AppRt.OPPO_AppRt) {\r\n            var FileSystemManager = Laya.Browser.window.qg.getFileSystemManager();\r\n            let data = StorageAdmin._array(name, null, [1, `${name}.png`]).value;\r\n            let savedFilePath = Laya.Browser.window.qg.env.USER_DATA_PATH\r\n                + data[0] + data[1];\r\n            let _savedFilePath = Laya.Browser.window.qg.env.USER_DATA_PATH\r\n                + (data[0] + 1) + data[1];\r\n            var save = () => {\r\n                FileSystemManager.saveFile({\r\n                    tempFilePath: tempFilePath,\r\n                    filePath: _savedFilePath,\r\n                    success: function (res) {\r\n                        console.log('-------------------------图片保存成功', res['savedFilePath']);\r\n                        StorageAdmin._array(name).value = [data[0] + 1, data[1]];\r\n                        func && func(res);\r\n                    },\r\n                    fail: function () {\r\n                        console.log('xxxxxxxxxxxxxxxxxxxxxxxxx保存图片失败');\r\n                    },\r\n                    complete: function () { }\r\n                });\r\n            };\r\n            FileSystemManager.access({\r\n                path: savedFilePath,\r\n                success: () => {\r\n                    FileSystemManager.removeSavedFile({\r\n                        filePath: savedFilePath,\r\n                        success: () => {\r\n                            console.log('---------------------------删除保存的图片成功！');\r\n                            save();\r\n                        },\r\n                    });\r\n                },\r\n                fail: () => {\r\n                    console.log('xxxxxxxxxxxxxxxxxxxxxxxxxxxx没有保存这个文件！');\r\n                    save();\r\n                },\r\n                complete: () => { },\r\n            });\r\n        }\r\n    }\r\n    LwgOPPO._picSave = _picSave;\r\n    function _getStoragePic(name) {\r\n        if (TJ.API.AppInfo.Channel() == TJ.Define.Channel.AppRt.OPPO_AppRt) {\r\n            let data = StorageAdmin._array(name).value;\r\n            if (data.length > 0) {\r\n                return Laya.Browser.window.qg.env.USER_DATA_PATH + data[0] + data[1];\r\n            }\r\n            ;\r\n        }\r\n    }\r\n    LwgOPPO._getStoragePic = _getStoragePic;\r\n})(LwgOPPO || (LwgOPPO = {}));\r\n",
  "references": [
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Lwg/Lwg.ts"
  ]
}
