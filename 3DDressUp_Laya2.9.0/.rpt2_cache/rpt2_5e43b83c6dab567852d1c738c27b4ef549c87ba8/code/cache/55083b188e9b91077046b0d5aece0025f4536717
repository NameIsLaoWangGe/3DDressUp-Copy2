{
  "code": "import ADManager, { TaT } from \"../../TJ/Admanager\";\r\nimport { Admin, DataAdmin, Dialogue, TimerAdmin, Tools } from \"../Lwg/Lwg\";\r\nimport { LwgOPPO } from \"../Lwg/LwgOPPO\";\r\nimport { _3D } from \"./_3D\";\r\nimport { _GameData } from \"./_GameData\";\r\nimport { _GameEffects3D } from \"../Lwg/_GameEffects3D\";\r\nimport { _Res } from \"../Lwg/_Res\";\r\nimport { _UI } from \"../Lwg/_UI\";\r\nexport var _DressingRoom;\r\n(function (_DressingRoom) {\r\n    class _Item extends DataAdmin._Item {\r\n        get $icon() {\r\n            return this.$data ? this.$data['icon'] : null;\r\n        }\r\n        set $icon(_icon) {\r\n            this.$data['icon'] = _icon;\r\n        }\r\n        get $putOn() {\r\n            return this.$data ? this.$data['putOn'] : null;\r\n        }\r\n        set $putOn(_icon) {\r\n            this.$data['putOn'] = _icon;\r\n        }\r\n        $button() {\r\n            this._btnUp(this._Owner, (e) => {\r\n                if (this.$name === 'ads') {\r\n                    return;\r\n                }\r\n                if (_GameData._AllClothes._ins()._getProperty(this.$name, _GameData._AllClothes._ins()._property.$complete)) {\r\n                    _GameData._AllClothes._ins().accurateChange(this.$data['part'], this.$name);\r\n                    _GameEffects3D._showCloth(_3D._Scene._ins()._Owner);\r\n                }\r\n                else {\r\n                    ADManager.ShowReward(() => {\r\n                        if (_GameData._AllClothes._ins()._checkCondition(this.$name)) {\r\n                            Dialogue.createHint_Middle('恭喜获得新服装！');\r\n                            _GameData._AllClothes._ins().accurateChange(this.$data['part'], this.$name);\r\n                        }\r\n                    });\r\n                }\r\n            }, null);\r\n        }\r\n        $render() {\r\n            if (this.$name === 'ads') {\r\n                !this._BoxChild('NativeRoot') && Tools._Node.createPrefab(_Res._list.prefab2D.NativeRoot.prefab, this._Owner);\r\n                this._ImgChild('Mask').visible = this._ImgChild('Icon').visible = this._ImgChild('Board').visible = false;\r\n            }\r\n            else {\r\n                this._BoxChild('NativeRoot') && this._BoxChild('NativeRoot').destroy();\r\n                this._ImgChild('Icon').visible = this._ImgChild('Board').visible = true;\r\n                if (this.$putOn) {\r\n                    this._ImgChild('Board').skin = `Game/UI/Common/xuanzhong.png`;\r\n                }\r\n                else {\r\n                    this._ImgChild('Board').skin = null;\r\n                }\r\n                if (this.$classify === _GameData._AllClothes._ins()._classify.DIY) {\r\n                    if (TJ.API.AppInfo.Channel() == TJ.Define.Channel.AppRt.OPPO_AppRt) {\r\n                        this._ImgChild('Icon').skin = LwgOPPO._getStoragePic(this.$name);\r\n                        this._ImgChild('Icon').size(110, 130);\r\n                        this._ImgChild('Icon').scale(1, 1);\r\n                    }\r\n                    else {\r\n                        this._ImgChild('Icon').skin = this.$icon;\r\n                    }\r\n                }\r\n                else {\r\n                    this._ImgChild('Icon').size(null, null);\r\n                    this._ImgChild('Icon').scale(0.9, 0.9);\r\n                    this._ImgChild('Icon').skin = _GameData._AllClothes._ins().getGeneralIcon(this.$name);\r\n                }\r\n            }\r\n            if (this.$complete) {\r\n                this._ImgChild('Mask').visible = this._ImgChild('AdsSign').visible = false;\r\n            }\r\n            else {\r\n                this._ImgChild('Mask').visible = this._ImgChild('AdsSign').visible = true;\r\n            }\r\n        }\r\n    }\r\n    class DressingRoom extends Admin._SceneBase {\r\n        lwgOnAwake() {\r\n            ADManager.TAPoint(TaT.PageShow, 'changepage');\r\n            _3D._Scene._ins().openMirror(this._ImgVar('MirrorSurface'));\r\n            const copyDIYArr = _GameData._AllClothes._ins().collectDIY();\r\n            _GameData._AllClothes._ins()._List = this._ListVar('List');\r\n            _GameData._AllClothes._ins()._listRenderScript = _Item;\r\n            _GameData._AllClothes._ins()._listArray = _GameData._AllClothes._ins()._getArrByClassify(_GameData._AllClothes._ins()._classify.DIY);\r\n            if (copyDIYArr.length > 0) {\r\n                this.switchClassify(this._ImgVar('DIY'));\r\n            }\r\n            else {\r\n                this.switchClassify(this._ImgVar('Dress'));\r\n            }\r\n        }\r\n        lwgAdaptive() {\r\n            this._SpriteVar('Mirror').x = Laya.stage.width * 0.234;\r\n        }\r\n        lwgOnStart() {\r\n            _GameData._AllClothes._ins()._List.refresh();\r\n            this.UI = new _UI(this._Owner);\r\n            TimerAdmin._frameOnce(10, this, () => {\r\n                this.UI.operationAppear(() => {\r\n                    this.UI.btnCompleteAppear(null, 400);\r\n                });\r\n                this.UI.btnBackAppear(null, 200);\r\n            });\r\n            this.UI.btnCompleteClick = () => {\r\n                this.UI.operationVinish(() => {\r\n                    _3D._Scene._ins().closeMirror();\r\n                    _3D._Scene._ins().cameraToSprite(this._Owner);\r\n                    Laya.Resource.destroyUnusedResources();\r\n                    this._openScene('Start', true, true);\r\n                    this.UI.btnBackVinish();\r\n                }, 200);\r\n            };\r\n        }\r\n        switchClassify(_element) {\r\n            let arr = [];\r\n            for (let index = 0; index < this._ImgVar('Part').numChildren; index++) {\r\n                const element = this._ImgVar('Part').getChildAt(index);\r\n                const Icon = element.getChildAt(0);\r\n                if (_element === element) {\r\n                    element.skin = `Game/UI/Common/kuang_fen.png`;\r\n                    Icon.skin = `Game/UI/DressingRoom/PartIcon/${element.name}_s.png`;\r\n                    if (_element.name === 'DIY') {\r\n                        arr = _GameData._AllClothes._ins()._getArrByClassify(_element.name);\r\n                    }\r\n                    else {\r\n                        let _arr = _GameData._AllClothes._ins()._getArrByClassify(_GameData._AllClothes._ins()._classify.General);\r\n                        for (let index = 0; index < _arr.length; index++) {\r\n                            const obj = _arr[index];\r\n                            if (obj[_GameData._AllClothes._ins()._otherPro.part] === _element.name) {\r\n                                arr.push(obj);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    element.skin = `Game/UI/Common/kuang_bai.png`;\r\n                    Icon.skin = `Game/UI/DressingRoom/PartIcon/${element.name}.png`;\r\n                }\r\n                _GameData._AllClothes._ins()._listArray = arr;\r\n            }\r\n        }\r\n        lwgButton() {\r\n            for (let index = 0; index < this._ImgVar('Part').numChildren; index++) {\r\n                const _element = this._ImgVar('Part').getChildAt(index);\r\n                this._btnUp(_element, () => {\r\n                    this.switchClassify(_element);\r\n                }, 'no');\r\n            }\r\n        }\r\n        lwgOnDisable() {\r\n            ADManager.TAPoint(TaT.PageLeave, 'changepage');\r\n        }\r\n    }\r\n    _DressingRoom.DressingRoom = DressingRoom;\r\n})(_DressingRoom || (_DressingRoom = {}));\r\nexport default _DressingRoom.DressingRoom;\r\n",
  "references": [
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/TJ/Admanager.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Lwg/Lwg.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Lwg/LwgOPPO.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Game/_3D.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Game/_GameData.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Lwg/_GameEffects3D.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Lwg/_MakeTailor.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Lwg/_Res.ts",
    "D:/Game/project/3DDressUp/Copy2/3DDressUp_Laya2.9.0/src/script/Lwg/_UI.ts"
  ]
}
